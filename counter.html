<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Countdown</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Zalando+Sans+Expanded:ital,wght@0,200..900;1,200..900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="CSS/style-main.css">
    <link rel="stylesheet" href="CSS/buttons.css">
</head>

<body>

<section id="day-form">
    <h2>Countdown</h2>
    <p>Widget to count down the time until class ends</p>
    <label for="dayinput">Enter Day</label>
    <input type="text" id="dayinput" placeholder="e.g., Monday">

    <button id="start">Submit</button>
    <label for="countdown">Time Remaining:</label>
    <input type="text" id="countdown" readonly>
</section>

<script>
    let countdownInterval = null; 

    start.onclick = function () {
        if (countdownInterval) {
            clearInterval(countdownInterval);
        }

        let dayText = dayinput.value.toLowerCase()
        let dayMap = { sun: 0, mon: 1, tue: 2, wed: 3, thu: 4, fri: 5, sat: 6 }
        let targetDay = dayMap[dayText.slice(0, 3)] ?? new Date().getDay()

        function updateCountdown() {
            let now = new Date()
            let target = new Date()

            if (targetDay === 1) {
                target.setHours(10, 10, 0, 0)
            } else {
                target.setHours(11, 40, 0, 0)
            }  
    
            let daysAway = (targetDay - now.getDay() + 7) % 7
            if (daysAway === 0 && now > target) daysAway = 7
            target.setDate(now.getDate() + daysAway)
            let diff = target - now
            let daysLeft = Math.floor(diff / (1000 * 60 * 60 * 24))
            let hoursLeft = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))
            let minutesLeft = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60))
            let secondsLeft = Math.floor((diff % (1000 * 60)) / 1000)
            countdown.value = daysLeft + "d " + hoursLeft + "h " + minutesLeft + "m " + secondsLeft + "s"
        }
        
        updateCountdown()
        countdownInterval = setInterval(updateCountdown, 1000)
    }
</script>


<script src="Javascript-linking/class_links_link.js"> </script>
<button id="main">Return To Homepage</button>


</body>